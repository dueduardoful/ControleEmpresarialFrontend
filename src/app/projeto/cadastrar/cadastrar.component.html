<form (ngSubmit)="onSubmit()" #projetoForm="ngForm">
  <div class="row col-lg-10 m-auto">

    <div class="form-group col-lg-3">
      <label for="nome">Nome do Projeto<span class="text-danger">*</span></label>
      <input name="nome" id="nome" type="text" [(ngModel)]="projeto.nomeProjeto" #nome="ngModel" class="form-control" required>
      <span class="small text-danger" *ngIf="nome.invalid && (nome.dirty || nome.touched)">Nome do projeto é obrigatório</span>
    </div>
    <div class="form-group col-lg-3">
      <label for="data_inicio">Cliente<span class="text-danger">*</span></label>
      <select name="cliente" [(ngModel)]="projeto.cliente" #cliente="ngModel" class="form-control" required>
        <option *ngFor="let cliente of clientes"  [ngValue]="cliente">{{cliente.nome}}</option>
      
      </select>
      <span class="small text-danger" *ngIf="nome.invalid && (cliente.dirty || cliente.touched)">Selecione um Cliente</span>
    </div>
    <div class="form-group col-lg-3">
      <label for="data_inicio">Data Início<span class="text-danger">*</span></label>
      <input name="data_inicio" id="data_inicio" type="date" #data="ngModel" [(ngModel)]="projeto.dt_inicio" class="form-control" required>
      <span class="small text-danger" *ngIf="data.invalid && (data.dirty || data.touched)">Data de início é obrigatória</span>
    </div>
    <div class="form-group col-lg-3">
      <label for="data_fim">Data fim</label>
      <input name="data_fim" id="data_fim" type="date" [(ngModel)]="projeto.dt_fim" class="form-control">
    </div>
    <div class="form-group col-lg-12">
      <label for="descricao">Descrição</label>
      <textarea name="descricao" id="descricao" [(ngModel)]="projeto.descricao" class="form-control"></textarea>
    </div>
    <div class="form-group col-lg-3">
      <label for="img">Imagens do Projeto<span class="text-danger">*</span></label>
      <input name="img" id="img" type="image" [(ngModel)]="projeto.img" class="form-control">
    </div>
    <div class="form-group col-lg-3">
      <label for="valorTotal">Valor</label>
      <input name="valorTotal" id="valorTotal" type="number" [(ngModel)]="projeto.valorTotal" class="form-control">
    </div>
    <div class="form-group col-lg-3">
      <label for="cep">Cep<span class="text-danger">*</span></label>
      <input (blur)="buscaEnderecoPorCep()" name="cep" id="cep" #cep="ngModel" type="text" [(ngModel)]="projeto.cep"
        class="form-control" required>
        <span class="small text-danger" *ngIf="cep.invalid && (cep.dirty || cep.touched)">Cep é obrigatório</span>
      <span class="small text-danger" *ngIf="erroEndereco">{{erroEndereco}}</span>
    </div>
    <div class="form-group col-lg-3">
      <label for="num">Numero<span class="text-danger">*</span></label>
      <input name="num" id="num" type="text" #numero="ngModel" [(ngModel)]="projeto.numeroCasa" class="form-control"  required>
      <span class="small text-danger" *ngIf="numero.invalid && (numero.dirty || numero.touched)">Número é obrigatório</span>
    </div>
    <div class="form-group col-lg-7">
      <label for="compl">Complemento</label>
      <input name="compl" id="compl" type="text" [(ngModel)]="projeto.complemento" class="form-control">
    </div>
    <div class="form-group col-lg-5">
      <label for="bairro">Bairro<span class="text-danger">*</span></label>
      <input name="bairro" id="bairro" type="text" [(ngModel)]="projeto.bairro" readonly class="form-control">
    </div>
    <div class="form-group col-lg-6">
      <label for="rua">Rua<span class="text-danger">*</span></label>
      <input name="rua" id="rua" type="text" [(ngModel)]="projeto.rua" readonly class="form-control">
    </div>
    <div class="form-group col-lg-3">
      <label for="cidade">Cidade<span class="text-danger">*</span></label>
      <input name="cidade" id="cidade" type="text" [(ngModel)]="projeto.cidade" readonly class="form-control">
    </div>
    <div class="form-group col-lg-3">
      <label for="estado">Estado<span class="text-danger">*</span></label>
      <input name="estado" id="estado" type="text" [(ngModel)]="projeto.estado" readonly class="form-control">
    </div>
    <div *ngIf="projetoForm.invalid; else botaoLiberado" class="col-lg-12">
      <button disabeld class="btn btn-secondary btn-block">Cadastrar Projeto</button>
    </div>
    <ng-template #botaoLiberado>
      <div class="col-lg-12">
        <button class="btn btn-success btn-block">Cadastrar Projeto</button>
      </div>
    </ng-template>
  </div>
</form>

<div *ngIf="cadastroSucesso" class="alert alert-success mt-3" role="alert">
  Projeto cadastrado com sucesso!
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
